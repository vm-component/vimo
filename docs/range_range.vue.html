<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>range/range.vue - Documentation</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="scripts/qrcode.js"></script>
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>

    <section class="vimo">
        <div class="vimo__imgBox">
            <img class="vimo__imgBox--img" src="./asset/img/vimo.png">
        </div>

        <div class="vimo__title">
            <h2>VIMO</h2>
            <!--<p>beta</p>-->
            <p>基于Vue2.x的移动端Hybrid框架</p>
        </div>
        <div class="vimo__iframe">
            <iframe src="https://ghbtns.com/github-btn.html?user=DTFE&amp;repo=Vimo&amp;type=star&amp;count=true"
                    frameborder="0" scrolling="0" width="110px" height="20px"
                    class="enter-transition"
                    style=""></iframe>
            <iframe src="https://ghbtns.com/github-btn.html?user=DTFE&amp;repo=Vimo&amp;type=fork&amp;count=true"
                    frameborder="0" scrolling="0" width="95px" height="20px"
                    class="enter-transition"
                    style=""></iframe>
        </div>
    </section>
    <section class="nav__header"><h2><a href="index.html">首页 / Home</a></h2><h2><a href="https://dtfe.github.io/vimo-demo">示例 / Demo</a></h2><h2><a href="https://github.com/DTFE/vimo-start-kit">如何开始 / How To Start</a></h2><h2><a href="https://github.com/DTFE/Vimo/blob/master/CHANGELOG.md">更新日志 / Change Log</a></h2><h2><a href="#">常见问题 / Question</a></h2></section><h3>组件 / Components</h3><ul><li><a href="component-ActionSheet.html">ActionSheet</a><ul class='methods'><li data-type='method'><a href="component-ActionSheet.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-ActionSheet.html#~present">present</a></li></ul></li><li><a href="component-Alert.html">Alert</a><ul class='methods'><li data-type='method'><a href="component-Alert.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Alert.html#~present">present</a></li></ul></li><li><a href="component-Avatar.html">Avatar</a></li><li><a href="component-Backdrop.html">Backdrop</a></li><li><a href="component-Badge.html">Badge</a></li><li><a href="component-Base_App.html">Base/App</a><ul class='methods'><li data-type='method'><a href="component-Base_App.html#~isEnabled">isEnabled</a></li><li data-type='method'><a href="component-Base_App.html#~isScrolling">isScrolling</a></li><li data-type='method'><a href="component-Base_App.html#~setClass">setClass</a></li><li data-type='method'><a href="component-Base_App.html#~setDisableScroll">setDisableScroll</a></li><li data-type='method'><a href="component-Base_App.html#~setDocTitle">setDocTitle</a></li><li data-type='method'><a href="component-Base_App.html#~setEnabled">setEnabled</a></li><li data-type='method'><a href="component-Base_App.html#~setScrolling">setScrolling</a></li></ul></li><li><a href="component-Base_Content.html">Base/Content</a><ul class='methods'><li data-type='method'><a href="component-Base_Content.html#~getContentDimensions">getContentDimensions</a></li><li data-type='method'><a href="component-Base_Content.html#~resize">resize</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollBy">scrollBy</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollTo">scrollTo</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollToBottom">scrollToBottom</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollToElement">scrollToElement</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollToTop">scrollToTop</a></li></ul></li><li><a href="component-Base_Footer.html">Base/Footer</a><ul class='methods'><li data-type='method'><a href="component-Base_Footer.html#~hide">hide</a></li><li data-type='method'><a href="component-Base_Footer.html#~setStyle">setStyle</a></li><li data-type='method'><a href="component-Base_Footer.html#~show">show</a></li><li data-type='method'><a href="component-Base_Footer.html#~toggle">toggle</a></li></ul></li><li><a href="component-Base_Header.html">Base/Header</a><ul class='methods'><li data-type='method'><a href="component-Base_Header.html#~hide">hide</a></li><li data-type='method'><a href="component-Base_Header.html#~setStyle">setStyle</a></li><li data-type='method'><a href="component-Base_Header.html#~show">show</a></li><li data-type='method'><a href="component-Base_Header.html#~toggle">toggle</a></li></ul></li><li><a href="component-Base_Nav.html">Base/Nav</a></li><li><a href="component-Base_Page.html">Base/Page</a></li><li><a href="component-Button.html">Button</a></li><li><a href="component-Buttons.html">Buttons</a></li><li><a href="component-Card.html">Card</a></li><li><a href="component-Checkbox.html">Checkbox</a></li><li><a href="component-ChooseCity.html">ChooseCity</a></li><li><a href="component-CityPicker.html">CityPicker</a></li><li><a href="component-Column.html">Column</a></li><li><a href="component-Datetime.html">Datetime</a></li><li><a href="component-Fab.html">Fab</a><ul class='methods'><li data-type='method'><a href="component-Fab.html#~close">close</a></li></ul></li><li><a href="component-FabButton.html">FabButton</a></li><li><a href="component-FabList.html">FabList</a></li><li><a href="component-Feedback.html">Feedback</a><ul class='methods'><li data-type='method'><a href="component-Feedback.html#~destroy">destroy</a></li><li data-type='method'><a href="component-Feedback.html#~update">update</a></li></ul></li><li><a href="component-Grid.html">Grid</a></li><li><a href="component-Icon.html">Icon</a></li><li><a href="component-Img.html">Img</a></li><li><a href="component-Indicator.html">Indicator</a><ul class='methods'><li data-type='method'><a href="component-Indicator.html#.dismiss">dismiss</a></li><li data-type='method'><a href="component-Indicator.html#.present">present</a></li></ul></li><li><a href="component-InfiniteScroll.html">InfiniteScroll</a><ul class='methods'><li data-type='method'><a href="component-InfiniteScroll.html#~complete">complete</a></li><li data-type='method'><a href="component-InfiniteScroll.html#~enable">enable</a></li><li data-type='method'><a href="component-InfiniteScroll.html#~waitFor">waitFor</a></li></ul></li><li><a href="component-InfiniteScrollContent.html">InfiniteScrollContent</a></li><li><a href="component-Input.html">Input</a><ul class='methods'><li data-type='method'><a href="component-Input.html#~destroy">destroy</a></li><li data-type='method'><a href="component-Input.html#~update">update</a></li></ul></li><li><a href="component-Item.html">Item</a></li><li><a href="component-ItemCollapse.html">ItemCollapse</a></li><li><a href="component-ItemGroup.html">ItemGroup</a></li><li><a href="component-ItemOptions.html">ItemOptions</a></li><li><a href="component-ItemSliding.html">ItemSliding</a><ul class='methods'><li data-type='method'><a href="component-ItemSliding.html#~close">close</a></li><li data-type='method'><a href="component-ItemSliding.html#~getOpenAmount">getOpenAmount</a></li><li data-type='method'><a href="component-ItemSliding.html#~getSlidingPercent">getSlidingPercent</a></li><li data-type='method'><a href="component-ItemSliding.html#~openLeftOptions">openLeftOptions</a></li><li data-type='method'><a href="component-ItemSliding.html#~openRightOptions">openRightOptions</a></li></ul></li><li><a href="component-Label.html">Label</a></li><li><a href="component-List.html">List</a></li><li><a href="component-Loading.html">Loading</a><ul class='methods'><li data-type='method'><a href="component-Loading.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Loading.html#~present">present</a></li></ul></li><li><a href="component-Menus.html">Menus</a><ul class='methods'><li data-type='method'><a href="component-Menus.html#~close">close</a></li><li data-type='method'><a href="component-Menus.html#~open">open</a></li><li data-type='method'><a href="component-Menus.html#~toggle">toggle</a></li></ul></li><li><a href="component-Modal.html">Modal</a><ul class='methods'><li data-type='method'><a href="component-Modal.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Modal.html#~present">present</a></li></ul></li><li><a href="component-Navbar.html">Navbar</a><ul class='methods'><li data-type='method'><a href="component-Navbar.html#~hideOptionButton">hideOptionButton</a></li><li data-type='method'><a href="component-Navbar.html#~reset">reset</a></li><li data-type='method'><a href="component-Navbar.html#~showOptionButton">showOptionButton</a></li><li data-type='method'><a href="component-Navbar.html#~showPopMenu">showPopMenu</a></li></ul></li><li><a href="component-Note.html">Note</a></li><li><a href="component-NoticeBar.html">NoticeBar</a><ul class='methods'><li data-type='method'><a href="component-NoticeBar.html#~close">close</a></li></ul></li><li><a href="component-Picker.html">Picker</a><ul class='methods'><li data-type='method'><a href="component-Picker.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Picker.html#~present">present</a></li></ul></li><li><a href="component-Popover.html">Popover</a><ul class='methods'><li data-type='method'><a href="component-Popover.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Popover.html#~present">present</a></li></ul></li><li><a href="component-PreviewImage.html">PreviewImage</a></li><li><a href="component-Radio.html">Radio</a></li><li><a href="component-Range.html">Range</a></li><li><a href="component-Refresher.html">Refresher</a><ul class='methods'><li data-type='method'><a href="component-Refresher.html#~cancel">cancel</a></li><li data-type='method'><a href="component-Refresher.html#~complete">complete</a></li></ul></li><li><a href="component-RefresherContent.html">RefresherContent</a></li><li><a href="component-Row.html">Row</a></li><li><a href="component-Scroll.html">Scroll</a></li><li><a href="component-ScrollSegment.html">ScrollSegment</a></li><li><a href="component-SearchBar.html">SearchBar</a><ul class='methods'><li data-type='method'><a href="component-SearchBar.html#~setFocus">setFocus</a></li></ul></li><li><a href="component-Segment.html">Segment</a></li><li><a href="component-SegmentButton.html">SegmentButton</a></li><li><a href="component-Select.html">Select</a></li><li><a href="component-Separation.html">Separation</a></li><li><a href="component-Slide.html">Slide</a></li><li><a href="component-SlideBox.html">SlideBox</a><ul class='methods'><li data-type='method'><a href="component-SlideBox.html#~cancel">cancel</a></li><li data-type='method'><a href="component-SlideBox.html#~checking">checking</a></li><li data-type='method'><a href="component-SlideBox.html#~complete">complete</a></li><li data-type='method'><a href="component-SlideBox.html#~fail">fail</a></li></ul></li><li><a href="component-Slides.html">Slides</a></li><li><a href="component-Spinner.html">Spinner</a></li><li><a href="component-Tab.html">Tab</a></li><li><a href="component-Tabs.html">Tabs</a><ul class='methods'><li data-type='method'><a href="component-Tabs.html#~getActivatedIndex">getActivatedIndex</a></li><li data-type='method'><a href="component-Tabs.html#~getByIndex">getByIndex</a></li><li data-type='method'><a href="component-Tabs.html#~getSelected">getSelected</a></li><li data-type='method'><a href="component-Tabs.html#~select">select</a></li></ul></li><li><a href="component-Thumbnail.html">Thumbnail</a></li><li><a href="component-Title.html">Title</a><ul class='methods'><li data-type='method'><a href="component-Title.html#~getTitle">getTitle</a></li><li data-type='method'><a href="component-Title.html#~reset">reset</a></li><li data-type='method'><a href="component-Title.html#~setTitle">setTitle</a></li><li data-type='method'><a href="component-Title.html#~setTitleColor">setTitleColor</a></li></ul></li><li><a href="component-Toast.html">Toast</a></li><li><a href="component-Toggle.html">Toggle</a></li><li><a href="component-Toolbar.html">Toolbar</a></li></ul><h3>类 / Classes</h3><ul><li><a href="Config.html">Config</a><ul class='methods'><li data-type='method'><a href="Config.html#get">get</a></li><li data-type='method'><a href="Config.html#getBoolean">getBoolean</a></li><li data-type='method'><a href="Config.html#getNumber">getNumber</a></li><li data-type='method'><a href="Config.html#set">set</a></li><li data-type='method'><a href="Config.html#settings">settings</a></li></ul></li><li><a href="History.html">History</a><ul class='methods'><li data-type='method'><a href="History.html#canGoBack">canGoBack</a></li><li data-type='method'><a href="History.html#first">first</a></li><li data-type='method'><a href="History.html#getActive">getActive</a></li><li data-type='method'><a href="History.html#getDirection">getDirection</a></li><li data-type='method'><a href="History.html#getHistory">getHistory</a></li><li data-type='method'><a href="History.html#getPrevious">getPrevious</a></li><li data-type='method'><a href="History.html#indexOf">indexOf</a></li><li data-type='method'><a href="History.html#toRoot">toRoot</a></li></ul></li><li><a href="Platform.html">Platform</a><ul class='methods'><li data-type='method'><a href="Platform.html#dir">dir</a></li><li data-type='method'><a href="Platform.html#do">do</a></li><li data-type='method'><a href="Platform.html#height">height</a></li><li data-type='method'><a href="Platform.html#is">is</a></li><li data-type='method'><a href="Platform.html#isLandscape">isLandscape</a></li><li data-type='method'><a href="Platform.html#isPortrait">isPortrait</a></li><li data-type='method'><a href="Platform.html#isRTL">isRTL</a></li><li data-type='method'><a href="Platform.html#lang">lang</a></li><li data-type='method'><a href="Platform.html#navigatorPlatform">navigatorPlatform</a></li><li data-type='method'><a href="Platform.html#netType">netType</a></li><li data-type='method'><a href="Platform.html#platforms">platforms</a></li><li data-type='method'><a href="Platform.html#ready">ready</a></li><li data-type='method'><a href="Platform.html#registerMethod">registerMethod</a></li><li data-type='method'><a href="Platform.html#userAgent">userAgent</a></li><li data-type='method'><a href="Platform.html#versions">versions</a></li><li data-type='method'><a href="Platform.html#width">width</a></li></ul></li></ul><h3>模块 / Modules</h3><ul><li><a href="module-Util.html">Util</a><ul class='members'><li data-type='member'><a href="module-Util.html#.REGEXP">REGEXP</a></li></ul><ul class='methods'><li data-type='method'><a href="module-Util.html#.assign">assign</a></li><li data-type='method'><a href="module-Util.html#.clamp">clamp</a></li><li data-type='method'><a href="module-Util.html#.deepClone">deepClone</a></li><li data-type='method'><a href="module-Util.html#.defaults">defaults</a></li><li data-type='method'><a href="module-Util.html#.docReady">docReady</a></li><li data-type='method'><a href="module-Util.html#.firstUpperCase">firstUpperCase</a></li><li data-type='method'><a href="module-Util.html#.focusOutActiveElement">focusOutActiveElement</a></li><li data-type='method'><a href="module-Util.html#.hasClass">hasClass</a></li><li data-type='method'><a href="module-Util.html#.hasFocus">hasFocus</a></li><li data-type='method'><a href="module-Util.html#.hasFocusedTextInput">hasFocusedTextInput</a></li><li data-type='method'><a href="module-Util.html#.hashChange">hashChange</a></li><li data-type='method'><a href="module-Util.html#.hasPointerMoved">hasPointerMoved</a></li><li data-type='method'><a href="module-Util.html#.isActive">isActive</a></li><li data-type='method'><a href="module-Util.html#.isArray">isArray</a></li><li data-type='method'><a href="module-Util.html#.isBlank">isBlank</a></li><li data-type='method'><a href="module-Util.html#.isBoolean">isBoolean</a></li><li data-type='method'><a href="module-Util.html#.isCheckedProperty">isCheckedProperty</a></li><li data-type='method'><a href="module-Util.html#.isDate">isDate</a></li><li data-type='method'><a href="module-Util.html#.isDefined">isDefined</a></li><li data-type='method'><a href="module-Util.html#.isFunction">isFunction</a></li><li data-type='method'><a href="module-Util.html#.isNumber">isNumber</a></li><li data-type='method'><a href="module-Util.html#.isObject">isObject</a></li><li data-type='method'><a href="module-Util.html#.isPassive">isPassive</a></li><li data-type='method'><a href="module-Util.html#.isPlainObject">isPlainObject</a></li><li data-type='method'><a href="module-Util.html#.isPresent">isPresent</a></li><li data-type='method'><a href="module-Util.html#.isPrimitive">isPrimitive</a></li><li data-type='method'><a href="module-Util.html#.isRegexp">isRegexp</a></li><li data-type='method'><a href="module-Util.html#.isString">isString</a></li><li data-type='method'><a href="module-Util.html#.isTextInput">isTextInput</a></li><li data-type='method'><a href="module-Util.html#.isTrueProperty">isTrueProperty</a></li><li data-type='method'><a href="module-Util.html#.isUndefined">isUndefined</a></li><li data-type='method'><a href="module-Util.html#.merge">merge</a></li><li data-type='method'><a href="module-Util.html#.parsePxUnit">parsePxUnit</a></li><li data-type='method'><a href="module-Util.html#.pointerCoord">pointerCoord</a></li><li data-type='method'><a href="module-Util.html#.registerListener">registerListener</a></li><li data-type='method'><a href="module-Util.html#.removeArrayItem">removeArrayItem</a></li><li data-type='method'><a href="module-Util.html#.setElementClass">setElementClass</a></li><li data-type='method'><a href="module-Util.html#.transitionEnd">transitionEnd</a></li><li data-type='method'><a href="module-Util.html#.urlChange">urlChange</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">

    <article class="content">

        
        <h1 class="page-title">range/range.vue</h1>
        

        




    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template>
    &lt;div class="ion-range"
         :class="[modeClass,colorClass,{'range-pressed':pressed},{'range-disabled':disabled},{'range-has-pin':pin}]">
        &lt;slot name="range-left">&lt;/slot>
        &lt;div ref="slider"
             class="range-slider"
             @mouseup="pointerUp($event)"
             @touchend="pointerUp($event)"
             @mousemove="pointerMove($event)"
             @touchmove="pointerMove($event)"
             @mousedown="pointerDown($event)"
             @touchstart="pointerDown($event)">
            &lt;div class="range-tick" v-for=" t of ticks" :style="{ left: t.left }"
                 :class="{'range-tick-active':t.active}"
                 role="presentation">&lt;/div>
            &lt;div class="range-bar" role="presentation">&lt;/div>
            &lt;div class="range-bar range-bar-active" :style="{ left: barL,right:barR }" ref="bar"
                 role="presentation">&lt;/div>
            &lt;RangeKnobHandle
                    :ratio="ratioA"
                    :val="valA"
                    :pin="pin"
                    :pressed="pressedA"
                    :min="min"
                    :max="max"
                    :disabled="disabled">
            &lt;/RangeKnobHandle>
            &lt;RangeKnobHandle
                    :ratio="ratioB"
                    :val="valB"
                    :pin="pin"
                    :pressed="pressedB"
                    :min="min"
                    :max="max"
                    :disabled="disabled"
                    v-if="dualKnobs">
            &lt;/RangeKnobHandle>
        &lt;/div>
        &lt;slot name="range-right">&lt;/slot>
    &lt;/div>
&lt;/template>
&lt;style lang="less">
    @import "range";
    @import "range.ios.less";
    @import "range.md.less";
&lt;/style>
&lt;script type="text/javascript">
  /**
   *
   * @component Range
   * @description
   *
   * ## 表单组件 / Range滑块组件
   *
   *
   * ### 注意
   *
   * 如果debounce的值大于0, 则认为触发onChange事件是在松开knob之后, 并在debounce时间之后触发, 否则随着knob的拖动而触发onChange事件.
   *
   * @props {String} [color] - 颜色
   * @props {Number} [debounce=0] - 触发onChange的等待时间
   * @props {Boolean} [disabled=false] - 是否禁用
   * @props {Boolean} [dualKnobs=false] - 选择的拖动按钮, 默认是一个, true为两个
   * @props {Number} [max=100] - range的最大值
   * @props {Number} [min=0] - range的最小值
   * @props {String} [mode='ios'] - 模式
   * @props {Boolean} [pin=false] - 当拖动knob时显示大头针提示
   * @props {Boolean} [snaps=false] - 类似于卡槽, 如果为true, 则在range上画标尺, 并且拖动中knob只能停留在标尺标记处
   * @props {Number} [step=1] - 移动的步伐/粒度
   * @props {String| Number| Object} [value] - v-model对应的值, 需要出发input事件
   *
   * @slot range-right - 在range组件右边, 一般放Icon
   * @slot range-left - 在range组件左边, 一般放Icon
   *
   * @fires component:Range#onChange
   * @demo https://dtfe.github.io/vimo-demo/#/range
   *
   * @usage
   * &lt;List>
   *    &lt;ListHeader>
   *        &lt;span>Brightness&lt;/span>
   *        &lt;Badge slot="item-right">{{brightness}}&lt;/Badge>
   *    &lt;/ListHeader>
   *    &lt;Item>
   *         &lt;Range v-model="brightness">
   *            &lt;Icon slot="range-left" small name="sunny">&lt;/Icon>
   *            &lt;Icon slot="range-right" name="sunny">&lt;/Icon>
   *        &lt;/Range>
   *    &lt;/Item>
   * &lt;/List>
   *
   * */
  import RangeKnobHandle from './range-knob-handle.vue'
  import { setElementClass, pointerCoord, clamp, isNumber, isObject, isString } from '../util/util'
  export default{
    name: 'Range',
    data () {
      return {
        ticks: [], // 移动的标尺
        pressed: false, // 拖动knob

        barL: 0, // 左边bar的位置
        barR: 0, // 右边bar的位置

        ratioA: 0, // 左边bar的比例
        ratioB: 0, // 右边bar的比例
        valA: 0,
        valB: 0,
        pressedA: false,
        pressedB: false,

        _item: null, // 父组件item的句柄
        _sliderEl: null, // slider的DOM句柄
        _rect: null, // _sliderEl的尺寸对象
        _activeB: null, // 是否激活了B按钮

        _timer: null,

        valueInner: this.value // value内部值
      }
    },
    props: {
      /**
       * 颜色: "primary", "secondary", "danger", "light", and "dark"
       */
      color: [String],
      /**
       * 触发onChange的等待时间
       * */
      debounce: {
        type: Number,
        default: 0
      },
      /**
       * 是否禁用
       * */
      disabled: [Boolean],
      /**
       * 选择的拖动按钮, 默认是一个, true为两个
       * */
      dualKnobs: [Boolean],
      /**
       * range的最大值
       * */
      max: {
        type: Number,
        default: 100
      },
      /**
       *  range的最小值
       * */
      min: {
        type: Number,
        default: 0
      },
      mode: {
        type: String,
        default () { return this.$config &amp;&amp; this.$config.get('mode') || 'ios' }
      },
      /**
       * 当拖动knob时显示大头针提示
       * */
      pin: [Boolean],
      /**
       * 类似于卡槽, 如果为true, 则在range上画标尺,
       * 并且拖动中knob只能停留在标尺标记处
       * */
      snaps: [Boolean],
      /**
       * 移动的步伐/粒度
       * */
      step: {
        type: Number,
        default: 1
      },

      /**
       * v-model对应的值,
       * 需要出发input事件
       */
      value: [String, Number, Object]
    },
    computed: {
      // 环境样式
      modeClass () {
        return `range range-${this.mode}`
      },
      // 颜色
      colorClass () {
        return this.color ? (`range-${this.mode}-${this.color}`) : ''
      },

      /**
       * 返回knob现在的位置比, ratio数值在0/1之间,
       * 如果使用了两个knob, 则返回最小那个
       */
      ratio () {
        if (this.dualKnobs) {
          return Math.min(this.ratioA, this.ratioB)
        }
        return this.ratioA
      },

      /**
       * 在有两个knob的情况下, 返回最大的按个knob的ratio
       */
      ratioUpper () {
        if (this.dualKnobs) {
          return Math.max(this.ratioA, this.ratioB)
        }
        return null
      }
    },
    methods: {
      /**
       * 拖动开始
       * @param {UIEvent} ev
       * @return {boolean}
       * */
      pointerDown (ev) {
        // TODO: we could stop listening for events instead of checking this._disabled.
        // since there are a lot of events involved, this solution is
        // enough for the moment
        if (this.disabled) {
          return false
        }

        // prevent default so scrolling does not happen
        ev.preventDefault()
        ev.stopPropagation()

        // get the start coordinates
        const current = pointerCoord(ev)

        // 获取slider元素的尺寸
        const rect = this._rect = this._sliderEl.getBoundingClientRect()

        // 判断点击的位置离那个knob近
        const ratio = clamp(0, (current.x - rect.left) / (rect.width), 1)
        this._activeB = (Math.abs(ratio - this.ratioA) > Math.abs(ratio - this.ratioB))

        // 更新激活状态的knob位置

        this.updateRange(current, rect, true)

        // trigger a haptic start
        // this._haptic.gestureSelectionStart();

        // return true so the pointer events
        // know everything's still valid
        return true
      },

      /**
       * 拖动处理
       * @param {UIEvent} ev
       * */
      pointerMove (ev) {
        if (!this.disabled) {
          // prevent default so scrolling does not happen
          ev.preventDefault()
          ev.stopPropagation()

          // update the active knob's position
          const hasChanged = this.updateRange(pointerCoord(ev), this._rect, true)

          if (hasChanged &amp;&amp; this.snaps) {
            // trigger a haptic selection changed event
            // if this is a snap range
          }
        }
      },

      /**
       * 拖动停止
       * @param {UIEvent} ev
       * */
      pointerUp (ev) {
        if (!this.disabled) {
          // prevent default so scrolling does not happen
          ev.preventDefault()
          ev.stopPropagation()

          if (this.debounce > 0) {
            this._timer &amp;&amp; window.clearTimeout(this._timer)
            this._timer = window.setTimeout(() => {
              /**
               * @event component:Range#onChange
               * @description 值发生变化时触发
               * @property {any} value - 触发的值
               */
              this.$emit('onChange', this.valueInner)
            }, this.debounce)
          }

          // update the active knob's position
          this.updateRange(pointerCoord(ev), this._rect, false)
        }
      },

      /**
       * 更新knob的位置
       * @param {PointerCoordinates} current
       * @param {ClientRect} rect
       * @param {boolean} isPressed
       */
      updateRange (current, rect, isPressed) {
        // figure out where the pointer is currently at
        // update the knob being interacted with
        let ratio = clamp(0, (current.x - rect.left) / (rect.width), 1)
        let val = this.ratioToValue(ratio)

        if (this.snaps) {
          // snaps the ratio to the current value
          ratio = this.valueToRatio(val)
        }

        // update which knob is pressed
        this.pressed = isPressed

        if (this._activeB) {
          // when the pointer down started it was determined
          // that knob B was the one they were interacting with
          this.pressedB = isPressed
          this.pressedA = false
          this.ratioB = ratio

          if (val === this.valB) {
            // hasn't changed
            return false
          }
          this.valB = val
        } else {
          // interacting with knob A
          this.pressedA = isPressed
          this.pressedB = false
          this.ratioA = ratio

          if (val === this.valA) {
            // hasn't changed
            return false
          }
          this.valA = val
        }

        // value has been updated
        if (this.dualKnobs) {
          // dual knobs have an lower and upper value
          if (!this.valueInner) {
            // ensure we're always updating the same object
            this.valueInner = {}
          }
          this.valueInner.lower = Math.min(this.valA, this.valB)
          this.valueInner.upper = Math.max(this.valA, this.valB)
          // console.debug(`range, updateKnob: ${ratio}, lower: ${this.valueInner.lower}, upper: ${this.valueInner.upper}`);
        } else {
          // single knob only has one value
          this.valueInner = this.valA
          // console.debug(`range, updateKnob: ${ratio}, value: ${this.valueInner}`);
        }

        if (this.debounce === 0) {
          this.$emit('onChange', this.valueInner)
        }

        this.updateBar()

        // 告知v-model
        this.$emit('input', this.valueInner)

        return true
      },

      /**
       * @param {number} ratio
       */
      ratioToValue (ratio) {
        ratio = Math.round(((this.max - this.min) * ratio))
        ratio = Math.round(ratio / this.step) * this.step + this.min
        return clamp(this.min, ratio, this.max)
      },
      /**
       * @param {number} ratio
       */
      valueToRatio (value) {
        value = Math.round((value - this.min) / this.step) * this.step
        value = value / (this.max - this.min)
        return clamp(0, value, 1)
      },

      /**
       * 更新bar的位置
       */
      updateBar () {
        const ratioA = this.ratioA
        const ratioB = this.ratioB
        if (this.dualKnobs) {
          this.barL = `${(Math.min(ratioA, ratioB) * 100)}%`
          this.barR = `${100 - (Math.max(ratioA, ratioB) * 100)}%`
        } else {
          this.barL = ''
          this.barR = `${100 - (ratioA * 100)}%`
        }

        this.updateTicks()
      },

      /**
       * 更新bar的位置
       * 更新标尺
       */
      updateTicks () {
        const ticks = this.ticks
        const ratio = this.ratio

        if (this.snaps &amp;&amp; ticks) {
          if (this.dualKnobs) {
            var upperRatio = this.ratioUpper

            ticks.forEach(t => {
              t.active = (t.ratio >= ratio &amp;&amp; t.ratio &lt;= upperRatio)
            })
          } else {
            ticks.forEach(t => {
              t.active = (t.ratio &lt;= ratio)
            })
          }
        }
      },

      /**
       * 在rangebar上画上移动的标尺
       * */
      createTicks () {
        if (this.snaps) {
          this.$nextTick(function () {
            this.ticks = []
            for (var value = this.min; value &lt;= this.max; value += this.step) {
              var ratio = this.valueToRatio(value)
              this.ticks.push({
                ratio: ratio,
                left: `${ratio * 100}%`
              })
            }
            this.updateTicks()
          })
        }
      },

      /**
       * init
       * 为父元素item设置class需要等待mounted之后
       */
      initDOM () {
        // 在item父元素上添加类item-range
        if (this.$parent &amp;&amp; this.$parent.$options._componentTag &amp;&amp; this.$parent.$options._componentTag.toLowerCase() === 'item') {
          this._item = this.$parent
          if (this._item.$el) {
            setElementClass(this._item.$el, 'item-range', true)
            // setElementClass(this._item.$el, 'item-range-disabled', this.disabled);
          }
        }

        // 获取slider的DOM
        this._sliderEl = this.$refs.slider

        // 为range左右添加属性
        if (this.$slots &amp;&amp; this.$slots['range-left']) {
          this.$slots['range-left'].forEach(function (item) {
            item.elm.setAttribute('range-left', '')
          })
        }
        if (this.$slots &amp;&amp; this.$slots['range-right']) {
          this.$slots['range-right'].forEach(function (item) {
            item.elm.setAttribute('range-right', '')
          })
        }
      },
      /**
       * init
       * 初始化传入数据并更新视图
       */
      initData () {
        // 设置标尺
        this.createTicks()

        // 设置value的初始状态
        if (isString(this.valueInner)) {
          let val = Math.round(this.valueInner)
          if (!isNaN(val)) {
            this.valueInner = val
          } else {
            this.valueInner = 0
          }
        }

        if (isNumber(this.valueInner)) {
          this.ratioA = this.valueToRatio(this.valueInner)
        }

        if (isObject(this.valueInner)) {
          this.valA = Math.min(this.valueInner.lower, this.valueInner.upper)
          this.valB = Math.max(this.valueInner.lower, this.valueInner.upper)

          this.ratioA = this.valueToRatio(this.valA)
          this.ratioB = this.valueToRatio(this.valB)
        }
        // 更新bar
        this.updateBar()
      }
    },
    created () {
      this.initData()
    },
    mounted () {
      this.initDOM()
    },
    components: {
      RangeKnobHandle: RangeKnobHandle
    }
  }
&lt;/script>
</code></pre>
        </article>
    </section>





    </article>
</div>

<br class="clear">

<!--<footer>-->
    <!--文档根据<a href="https://github.com/DTFE/Vimo">Vimo源码</a>由<a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.3</a>自动生成, 主题修改自<a href="https://github.com/clenemt/docdash">docdash</a>, 并增加了 @component / @demo / @props / @slot / @usage 增强标注.-->
<!--</footer>-->

<footer>
    文档根据<a href="https://github.com/DTFE/Vimo">Vimo源码</a>由<a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.3</a>自动生成。
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
